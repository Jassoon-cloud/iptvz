# å·¥ä½œæµåç§°ï¼Œåœ¨Actionsé¡µé¢æ˜¾ç¤º
name: æµ‹è¯•Pythonå•ä¸ªè„šæœ¬ - è¯­æ³•+è¿è¡ŒéªŒè¯
# æ‰‹åŠ¨è§¦å‘ï¼Œä¸”æ”¯æŒé€‰æ‹©è¦æµ‹è¯•çš„è„šæœ¬ï¼ˆæ ¸å¿ƒï¼šè¾“å…¥å‚æ•°ï¼‰
on:
  workflow_dispatch:
    inputs:
      script_name:
        description: é€‰æ‹©è¦æµ‹è¯•çš„Pythonè„šæœ¬
        required: true
        default: DL.py  # é»˜è®¤æµ‹è¯•DL.pyï¼Œå¯æ”¹
        # åˆ—å‡ºä½ ä»“åº“é‡Œçš„æ‰€æœ‰å¾…æµ‹è¯•è„šæœ¬ï¼Œç›´æ¥é€‰æ‹©ï¼ˆä¸ç”¨æ‰‹åŠ¨è¾“å…¥ï¼‰
        options:
          - DL.py
          - HB.py
          - PX.py

# æ‰§è¡Œçš„æµ‹è¯•ä»»åŠ¡
jobs:
  test-single-script:
    runs-on: ubuntu-latest  # äº‘ç«¯Ubuntuç¯å¢ƒï¼ŒPythonå·²é¢„è£…
    steps:
      - name: æ‹‰å–ä»“åº“ä»£ç ï¼ˆå«æ‰€æœ‰Pythonè„šæœ¬/æ–‡ä»¶å¤¹ï¼‰
        uses: actions/checkout@v4

      - name: é…ç½®Pythonç¯å¢ƒï¼ˆå’ŒVPSç‰ˆæœ¬å°½é‡ä¸€è‡´ï¼Œé€‰3.10/3.11éƒ½å¯ä»¥ï¼‰
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: ã€ç¬¬ä¸€æ­¥ã€‘æ ¡éªŒè„šæœ¬è¯­æ³•ï¼ˆæå‰å‘ç°é”™è¯¯ï¼Œä¸è¿è¡Œè„šæœ¬ï¼‰
        run: |
          echo "ğŸ” æ­£åœ¨æ ¡éªŒ ${{ github.event.inputs.script_name }} è¯­æ³•..."
          python -m py_compile ${{ github.event.inputs.script_name }}
          echo "âœ… è¯­æ³•æ ¡éªŒé€šè¿‡ï¼æ— è¯­æ³•é”™è¯¯"

      - name: ã€ç¬¬äºŒæ­¥ã€‘å®é™…è¿è¡ŒPythonè„šæœ¬ï¼ˆæŸ¥çœ‹è¿è¡Œç»“æœ/æŠ¥é”™ï¼‰
        run: |
          echo "ğŸš€ å¼€å§‹è¿è¡Œ ${{ github.event.inputs.script_name }} ..."
          python ${{ github.event.inputs.script_name }}
          echo "ğŸ‰ è„šæœ¬è¿è¡Œå®Œæˆï¼æ— è¿è¡Œé”™è¯¯"
